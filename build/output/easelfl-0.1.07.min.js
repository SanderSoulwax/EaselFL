/*
* EaselJS
* Visit http://createjs.com/ for documentation, updates and examples.
*
* Copyright (c) 2011 gskinner.com, inc.
* 
* Distributed under the terms of the MIT license.
* http://www.opensource.org/licenses/mit-license.html
*
* This notice shall be included in all copies or substantial portions of the Software.
*/(function(){Array.prototype.indexOf||(Array.prototype.indexOf=function(h){for(var b=0,a=this.length;b<a;b++)if(this[b]===h)return b;return-1});Date.now||(Date.now=function(){return(new Date).valueOf()})})(window);(function(h){var b=function(){throw"UID cannot be instantiated";};b._nextID=0;b.get=function(){return b._nextID++};h.UID=b})(window);(function(h){var b=function(){throw"Ticker cannot be instantiated.";};b.useRAF=null;b.animationTarget=null;b._listeners=null;b._pauseable=null;b._paused=!1;b._inited=!1;b._startTime=0;b._pausedTime=0;b._ticks=0;b._pausedTickers=0;b._interval=50;b._lastTime=0;b._times=null;b._tickTimes=null;b._rafActive=!1;b._timeoutID=null;b.addListener=function(a,g){null!=a&&(b._inited||b.init(),b.removeListener(a),b._pauseable[b._listeners.length]=null==g?!0:g,b._listeners.push(a))};b.init=function(){b._inited=
!0;b._times=[];b._tickTimes=[];b._pauseable=[];b._listeners=[];b._times.push(b._lastTime=b._startTime=b._getTime());b.setInterval(b._interval)};b.removeListener=function(a){null!=b._listeners&&(a=b._listeners.indexOf(a),-1!=a&&(b._listeners.splice(a,1),b._pauseable.splice(a,1)))};b.removeAllListeners=function(){b._listeners=[];b._pauseable=[]};b.setInterval=function(a){b._interval=a;b._inited&&b._setupTick()};b.getInterval=function(){return b._interval};b.setFPS=function(a){b.setInterval(1E3/a)};
b.getFPS=function(){return 1E3/b._interval};b.getMeasuredFPS=function(a){if(2>b._times.length)return-1;null==a&&(a=b.getFPS()|0);a=Math.min(b._times.length-1,a);return 1E3/((b._times[0]-b._times[a])/a)};b.setPaused=function(a){b._paused=a};b.getPaused=function(){return b._paused};b.getTime=function(a){return b._getTime()-b._startTime-(a?b._pausedTime:0)};b.getTicks=function(a){return b._ticks-(a?b._pausedTickers:0)};b._handleAF=function(a){b._rafActive=!1;b._setupTick();a-b._lastTime>=b._interval-
1&&b._tick()};b._handleTimeout=function(){b.timeoutID=null;b._setupTick();b._tick()};b._setupTick=function(){if(!(b._rafActive||null!=b.timeoutID)){if(b.useRAF){var a=h.requestAnimationFrame||h.webkitRequestAnimationFrame||h.mozRequestAnimationFrame||h.oRequestAnimationFrame||h.msRequestAnimationFrame;if(a){a(b._handleAF,b.animationTarget);b._rafActive=!0;return}}b.timeoutID=setTimeout(b._handleTimeout,b._interval)}};b._tick=function(){b._ticks++;var a=b._getTime(),g=a-b._lastTime,i=b._paused;i&&
(b._pausedTickers++,b._pausedTime+=g);b._lastTime=a;for(var c=b._pauseable,d=b._listeners.slice(),e=d?d.length:0,f=0;f<e;f++){var j=d[f];null==j||i&&c[f]||(j.tick?j.tick(g,i):j instanceof Function&&j(g,i))}for(b._tickTimes.unshift(b._getTime()-a);100<b._tickTimes.length;)b._tickTimes.pop();for(b._times.unshift(a);100<b._times.length;)b._times.pop()};b._getTime=function(){return(new Date).getTime()};h.Ticker=b})(window);(function(h){var b=function(g,a,b,d,e){this.initialize(g,a,b,d,e)},a=b.prototype;a.stageX=0;a.stageY=0;a.type=null;a.nativeEvent=null;a.onMouseMove=null;a.onMouseUp=null;a.target=null;a.initialize=function(g,a,b,d,e){this.type=g;this.stageX=a;this.stageY=b;this.target=d;this.nativeEvent=e};a.clone=function(){return new b(this.type,this.stageX,this.stageY,this.target,this.nativeEvent)};a.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"};h.MouseEvent=
b})(window);(function(h){var b=function(g,a,b,d,e,f){this.initialize(g,a,b,d,e,f)},a=b.prototype;b.identity=null;b.DEG_TO_RAD=Math.PI/180;a.a=1;a.b=0;a.c=0;a.d=1;a.tx=0;a.ty=0;a.alpha=1;a.shadow=null;a.compositeOperation=null;a.initialize=function(g,a,b,d,e,f){null!=g&&(this.a=g);this.b=a||0;this.c=b||0;null!=d&&(this.d=d);this.tx=e||0;this.ty=f||0};a.prepend=function(g,a,b,d,e,f){var j=this.tx;if(1!=g||0!=a||0!=b||1!=d){var p=this.a,h=this.c;this.a=p*g+this.b*b;this.b=p*a+this.b*d;this.c=h*g+this.d*b;this.d=
h*a+this.d*d}this.tx=j*g+this.ty*b+e;this.ty=j*a+this.ty*d+f};a.append=function(a,i,b,d,e,f){var j=this.a,p=this.b,h=this.c,k=this.d;this.a=a*j+i*h;this.b=a*p+i*k;this.c=b*j+d*h;this.d=b*p+d*k;this.tx=e*j+f*h+this.tx;this.ty=e*p+f*k+this.ty};a.prependMatrix=function(a){this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty);this.prependProperties(a.alpha,a.shadow,a.compositeOperation)};a.appendMatrix=function(a){this.append(a.a,a.b,a.c,a.d,a.tx,a.ty);this.appendProperties(a.alpha,a.shadow,a.compositeOperation)};
a.prependTransform=function(a,i,c,d,e,f,j,h,l){if(e%360)var k=e*b.DEG_TO_RAD,e=Math.cos(k),k=Math.sin(k);else e=1,k=0;if(h||l)this.tx-=h,this.ty-=l;f||j?(f*=b.DEG_TO_RAD,j*=b.DEG_TO_RAD,this.prepend(e*c,k*c,-k*d,e*d,0,0),this.prepend(Math.cos(j),Math.sin(j),-Math.sin(f),Math.cos(f),a,i)):this.prepend(e*c,k*c,-k*d,e*d,a,i)};a.appendTransform=function(a,i,c,d,e,f,j,h,l){if(e%360)var k=e*b.DEG_TO_RAD,e=Math.cos(k),k=Math.sin(k);else e=1,k=0;f||j?(f*=b.DEG_TO_RAD,j*=b.DEG_TO_RAD,this.append(Math.cos(j),
Math.sin(j),-Math.sin(f),Math.cos(f),a,i),this.append(e*c,k*c,-k*d,e*d,0,0)):this.append(e*c,k*c,-k*d,e*d,a,i);if(h||l)this.tx-=h*this.a+l*this.c,this.ty-=h*this.b+l*this.d};a.rotate=function(a){var i=Math.cos(a),a=Math.sin(a),b=this.a,d=this.c,e=this.tx;this.a=b*i-this.b*a;this.b=b*a+this.b*i;this.c=d*i-this.d*a;this.d=d*a+this.d*i;this.tx=e*i-this.ty*a;this.ty=e*a+this.ty*i};a.skew=function(a,i){a*=b.DEG_TO_RAD;i*=b.DEG_TO_RAD;this.append(Math.cos(i),Math.sin(i),-Math.sin(a),Math.cos(a),0,0)};a.scale=
function(a,i){this.a*=a;this.d*=i;this.tx*=a;this.ty*=i};a.translate=function(a,i){this.tx+=a;this.ty+=i};a.identity=function(){this.alpha=this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;this.shadow=this.compositeOperation=null};a.invert=function(){var a=this.a,i=this.b,b=this.c,d=this.d,e=this.tx,f=a*d-i*b;this.a=d/f;this.b=-i/f;this.c=-b/f;this.d=a/f;this.tx=(b*this.ty-d*e)/f;this.ty=-(a*this.ty-i*e)/f};a.isIdentity=function(){return 0==this.tx&&0==this.ty&&1==this.a&&0==this.b&&0==this.c&&1==this.d};
a.decompose=function(a){null==a&&(a={});a.x=this.tx;a.y=this.ty;a.scaleX=Math.sqrt(this.a*this.a+this.b*this.b);a.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var i=Math.atan2(-this.c,this.d),c=Math.atan2(this.b,this.a);i==c?(a.rotation=c/b.DEG_TO_RAD,0>this.a&&0<=this.d&&(a.rotation+=0>=a.rotation?180:-180),a.skewX=a.skewY=0):(a.skewX=i/b.DEG_TO_RAD,a.skewY=c/b.DEG_TO_RAD);return a};a.reinitialize=function(a,i,b,d,e,f,j,h,l){this.initialize(a,i,b,d,e,f);this.alpha=j||1;this.shadow=h;this.compositeOperation=
l;return this};a.appendProperties=function(a,i,b){this.alpha*=a;this.shadow=i||this.shadow;this.compositeOperation=b||this.compositeOperation};a.prependProperties=function(a,i,b){this.alpha*=a;this.shadow=this.shadow||i;this.compositeOperation=this.compositeOperation||b};a.clone=function(){var a=new b(this.a,this.b,this.c,this.d,this.tx,this.ty);a.shadow=this.shadow;a.alpha=this.alpha;a.compositeOperation=this.compositeOperation;return a};a.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+
" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"};b.identity=new b(1,0,0,1,0,0);h.Matrix2D=b})(window);(function(h){var b=function(a,b){this.initialize(a,b)},a=b.prototype;a.x=0;a.y=0;a.initialize=function(a,b){this.x=null==a?0:a;this.y=null==b?0:b};a.clone=function(){return new b(this.x,this.y)};a.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"};h.Point=b})(window);(function(h){var b=function(a,b,c,d){this.initialize(a,b,c,d)},a=b.prototype;a._flX=0;a._flY=0;a._flWidth=0;a._flHeight=0;a._flCtx=a.id=null;a._flSync=function(a){this._flCtx||(this.id=UID.get(),this._flCtx=a,a._flCreate.push(["rct",this]));if(this._flX!==this.x||this._flY!==this.y||this._flWidth!==this.width||this._flHeight!==this.height)this._flX=this.x,this._flY=this.y,this._flWidth=this.width,this._flHeight=this.height,this._flCtx._flChange.push([this.id,"dim",[this.x,this.y,this.width,this.height]])};
a.x=0;a.y=0;a.width=0;a.height=0;a.initialize=function(a,b,c,d){this.x=null==a?0:a;this.y=null==b?0:b;this.width=null==c?0:c;this.height=null==d?0:d};a.clone=function(){return new b(this.x,this.y,this.width,this.height)};a.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"};h.Rectangle=b})(window);(function(h){function b(a){this.initialize(a)}function a(g){var c;g.width=parseFloat(g.getAttribute("width")||a.FL_WIDTH);g.height=parseFloat(g.getAttribute("height")||a.FL_HEIGHT);c=g.getAttribute("transparent");g.transparent=!c||!0===c||"true"===c.toLowerCase();this._ctx=new b(g);this._ctx._flCanvas=this;this.width=g.width;this.height=g.height}var g=b.prototype;g._flCommandQueues=null;g._flInstance=null;g._flInstanceID=null;g._flChange=null;g._flCreate=null;g._flItemIndex=null;g._flCurPressEvent=
null;g._flCanvas=null;g._flFlush=function(){if(this.flReady){var a=this._flInstance;if(this._flCreate.length){for(var g=this._flCreate,b,e=this._flItemIndex,f=0,j=g.length;f<j;++f)b=g[f][1],g[f][1]=b.id,e[b.id]=b;a.sendCreate(this._flCreate);this._flCreate=[]}this._flChange.length&&(a.sendChange(this._flChange),this._flChange=[])}};g.flInvoke=function(a,g,b){return this._flInstance?this._flInstance.sendInvoke([a,g,b]):null};g._flOnReady=function(){this._flInstance=b._flGetInstance(this._flInstanceID);
this.flReady=!0;this._flFlush();this._flCanvas._stage&&this._flCanvas._stage.flOnReady&&(this._flCanvas._stage.flReady=!0,this._flCanvas._stage.flOnReady(this._flCanvas._stage))};g.initialize=function(g){function c(a){var g,b;if("onClick"===a.type||"onMouseOver"===a.type||"onMouseOut"===a.type||"onPress"===a.type||"onMouseMove"===a.type||"onMouseUp"===a.type)if("onMouseMove"===a.type||"onMouseUp"===a.type?(b=e._flCurPressEvent,g=b.target,"onMouseUp"===a.type&&(e._flCurPressEvent=null)):b=g=e._flItemIndex[a.id],
b&&b[a.type])g=new MouseEvent(a.type,a.stageX,a.stageY,g,null),b[a.type](g),"onPress"===a.type&&(e._flCurPressEvent=g)}var d,e=this,f=g.getAttribute("id"),j=g.getAttribute("fl_swf_url")||a.FL_URL;this._flCreate=[];this._flChange=[];this._flItemIndex={};d="EaselFl_"+b._flCount++;this._flInstanceID=f||d;f!==this._flInstanceID&&g.setAttribute("id",d);a._flHooks[d]=function(){a._flHooks[d]=c;e._flOnReady()};b._flLoadInstance(d,g.width,g.height,g.transparent,this._flInstanceID,j)};b._flCount=0;b._flLoadInstance=
function(a,g,b,e,f,j){swfobject.embedSWF(j,f,g.toString(),b.toString(),"9.0.0",!1,{id:a},{scale:"noscale",salign:"TL",wmode:e?"transparent":"opaque"})};b._flGetInstance=function(a){return/Explorer/.test(navigator.appName)?h[a]:document[a]};g=a.prototype;g._ctx=null;g._stage=null;g.width=0;g.height=0;g.transparent=!0;g.isFl=!0;g.getContext=function(a){return"2d"===a?this._ctx:null};a.FL_URL="EaselFl.swf";a.FL_WIDTH="400";a.FL_HEIGHT="400";a._flHooks={};h.CanvasFl=a})(window);(function(h){var b=function(a){this.id=UID.get();this._img=a},a=b.prototype;a.id=null;a._img=null;a._flCtx=null;a._flSrc=null;a.sync=function(a){this._flCtx||(this._flCtx=a,a._flCreate.push(["img",this]));this._flSrc!==this._img.src&&(this._flSrc=this._img.src,a._flChange.push([this.id,"src",this._flSrc]))};b.watch=function(a){return!a.__fl?(a.__fl=new b(a),!0):!1};h.ImageFl=b})(window);(function(h){var b=function(){this.initialize()},a=b.prototype;a._flChange=null;a._flChildImages=null;b.getRGB=function(a,b,c,d){null!=a&&null==c&&(d=b,c=a&255,b=a>>8&255,a=a>>16&255);return null==d?"rgb("+a+","+b+","+c+")":"rgba("+a+","+b+","+c+","+d+")"};b.getHSL=function(a,b,c,d){return null==d?"hsl("+a%360+","+b+"%,"+c+"%)":"hsla("+a%360+","+b+"%,"+c+"%,"+d+")"};b.BASE_64={A:0,B:1,C:2,D:3,E:4,F:5,G:6,H:7,I:8,J:9,K:10,L:11,M:12,N:13,O:14,P:15,Q:16,R:17,S:18,T:19,U:20,V:21,W:22,X:23,Y:24,Z:25,a:26,
b:27,c:28,d:29,e:30,f:31,g:32,h:33,i:34,j:35,k:36,l:37,m:38,n:39,o:40,p:41,q:42,r:43,s:44,t:45,u:46,v:47,w:48,x:49,y:50,z:51,"0":52,1:53,2:54,3:55,4:56,5:57,6:58,7:59,8:60,9:61,"+":62,"/":63};b.STROKE_CAPS_MAP=["butt","round","square"];b.STROKE_JOINTS_MAP=["miter","round","bevel"];b._ctx=null;b.beginCmd=null;b.fillCmd=null;b.strokeCmd=null;a._strokeInstructions=null;a._strokeStyleInstructions=null;a._fillInstructions=null;a._instructions=null;a._oldInstructions=null;a._activeInstructions=null;a._active=
!1;a._dirty=!1;a.id=-1;a.initialize=function(){this.id=UID.get();this._flChange=[];this._flChildImages=[]};a.draw=function(a){for(;this._flChildImages.length;)this._flChildImages.pop().sync(a);if(this._flChange.length){for(var b=0,c=this._flChange.length;b<c;++b)a._flChange.push(this._flChange[b]);this._flChange=[]}};a.moveTo=function(a,b){this._flChange.push([this.id,"mt",[a,b]]);return this};a.lineTo=function(a,b){this._flChange.push([this.id,"lt",[a,b]]);return this};a.arcTo=function(a,b,c,d,e){this._flChange.push([this.id,
"at",[a,b,c,d,e]]);return this};a.arc=function(a,b,c,d,e,f){null==f&&(f=!1);this._flChange.push([this.id,"a",[a,b,c,d,e,f]]);return this};a.quadraticCurveTo=function(a,b,c,d){this._flChange.push([this.id,"qt",[a,b,c,d]]);return this};a.bezierCurveTo=function(a,b,c,d,e,f){this._flChange.push([this.id,"bt",[a,b,c,d,e,f]]);return this};a.rect=function(a,b,c,d){this._flChange.push([this.id,"dr",[a,b,c,d]]);return this};a.closePath=function(){this._flChange.push([this.id,"cp"]);return this};a.clear=function(){this._flChange.push([this.id,
"c"]);return this};a.beginFill=function(a){this._flChange.push([this.id,"f",[a]]);return this};a.beginLinearGradientFill=function(){if(Stage.FL_THROW_UNIMPLEMENTED)throw"EaselFl:Graphics.beginLinearGradientFill currently not implemented";return this};a.beginRadialGradientFill=function(){if(Stage.FL_THROW_UNIMPLEMENTED)throw"EaselFl:Graphics.beginRadialGradientFill currently not implemented";return this};a.beginBitmapFill=function(a,b){Stage.FL_LOG_PART_IMPLEMENTED&&(b&&"repeat-x"===b||"repeat-y"===
b)&&console.log("EaselFl:Graphics.beginBitmapFill currently does not implement repeat-x or repeat-y");ImageFl.watch(a);this._flChildImages.push(a.__fl);this._flChange.push([this.id,"bf",[a.__fl.id,b]]);return this};a.endFill=function(){this._flChange.push([this.id,"ef"]);return this};a.setStrokeStyle=function(a,b,c,d){Stage.FL_LOG_PART_IMPLEMENTED&&(b||c||d)&&console.log("EaselFl:Graphics.setStrokeStyle currently does not implement caps, joints, or miterLimit");this._flChange.push([this.id,"ss",[a,
b,c,d]]);return this};a.beginStroke=function(a){this._flChange.push([this.id,"s",a]);return this};a.beginLinearGradientStroke=function(){if(Stage.FL_THROW_UNIMPLEMENTED)throw"EaselFl:Graphics.beginLinearGradientStroke currently not implemented";return this};a.beginRadialGradientStroke=function(){if(Stage.FL_THROW_UNIMPLEMENTED)throw"EaselFl:Graphics.beginRadialGradientStroke currently not implemented";return this};a.beginBitmapStroke=function(a,b){ImageFl.watch(a);this._flChildImages.push(a.__fl);
this._flChange.push([this.id,"bs",[a.__fl.id,b]]);return this};a.endStroke=function(){this._flChange.push([this.id,"es"]);return this};a.curveTo=a.quadraticCurveTo;a.drawRect=a.rect;a.drawRoundRect=function(a,b,c,d,e){this._flChange.push([this.id,"rr",[a,b,c,d,e]]);return this};a.drawRoundRectComplex=function(a,b,c,d,e,f,j,h){this._flChange.push([this.id,"rc",[a,b,c,d,e,f,j,h]]);return this};a.drawCircle=function(a,b,c){this._flChange.push([this.id,"dc",[a,b,c]]);return this};a.drawEllipse=function(a,
b,c,d){this._flChange.push([this.id,"de",[a,b,c,d]]);return this};a.drawPolyStar=function(a,b,c,d,e,f){this._flChange.push([this.id,"dp",[a,b,c,d,e,f]]);return this};a.decodePath=function(a){for(var i=[this.moveTo,this.lineTo,this.quadraticCurveTo,this.bezierCurveTo],c=[2,2,4,6],d=0,e=a.length,f=[],j=0,h=0,l=b.BASE_64;d<e;){var k=l[a.charAt(d)],n=k>>3,q=i[n];if(!q||k&3)throw"bad path data";var r=c[n];n||(j=h=0);f.length=0;d++;k=(k>>2&1)+2;for(n=0;n<r;n++){var m=l[a.charAt(d)],s=m>>5?-1:1,m=(m&31)<<
6|l[a.charAt(d+1)];3==k&&(m=m<<6|l[a.charAt(d+2)]);m=s*m/10;n%2?j=m+=j:h=m+=h;f[n]=m;d+=k}q.apply(this,f)}return this};a.clone=function(){if(Stage.FL_THROW_UNIMPLEMENTED)throw"EaselFl:Graphics.clone currently not implemented";return o};a.toString=function(){return"[Graphics]"};a.mt=a.moveTo;a.lt=a.lineTo;a.at=a.arcTo;a.bt=a.bezierCurveTo;a.qt=a.quadraticCurveTo;a.a=a.arc;a.r=a.rect;a.cp=a.closePath;a.c=a.clear;a.f=a.beginFill;a.lf=a.beginLinearGradientFill;a.rf=a.beginRadialGradientFill;a.bf=a.beginBitmapFill;
a.ef=a.endFill;a.ss=a.setStrokeStyle;a.s=a.beginStroke;a.ls=a.beginLinearGradientStroke;a.rs=a.beginRadialGradientStroke;a.bs=a.beginBitmapStroke;a.es=a.endStroke;a.dr=a.drawRect;a.rr=a.drawRoundRect;a.rc=a.drawRoundRectComplex;a.dc=a.drawCircle;a.de=a.drawEllipse;a.dp=a.drawPolyStar;a.p=a.decodePath;h.Graphics=b})(window);(function(h){var b=function(){this.initialize()},a=b.prototype;b.suppressCrossDomainErrors=!1;a.alpha=1;a.cacheCanvas=null;a.id=-1;a.mouseEnabled=!0;a.name=null;a.parent=null;a.regX=0;a.regY=0;a.rotation=0;a.scaleX=1;a.scaleY=1;a.skewX=0;a.skewY=0;a.shadow=null;a.visible=!0;a.x=0;a.y=0;a.compositeOperation=null;a.snapToPixel=!1;a.onPress=null;a.onClick=null;a.onDoubleClick=null;a.onMouseOver=null;a.onMouseOut=null;a.onTick=null;a.filters=null;a.cacheID=0;a.mask=null;a._cacheOffsetX=0;a._cacheOffsetY=
0;a._cacheDataURLID=0;a._cacheDataURL=null;a._matrix=null;a.isVisible=function(){return this.visible&&0<this.alpha&&0!=this.scaleX&&0!=this.scaleY};a.getCacheDataURL=function(){if(Stage.FL_THROW_UNIMPLEMENTED)throw"EaselFl::DisplayObject.getCacheDataURL not yet implemented";};a.getStage=function(){for(var a=this;a.parent;)a=a.parent;return a instanceof Stage?a:null};a.localToGlobal=function(a,b){var c=this.getConcatenatedMatrix(this._matrix);if(null==c)return null;c.append(1,0,0,1,a,b);return new Point(c.tx,
c.ty)};a.globalToLocal=function(a,b){var c=this.getConcatenatedMatrix(this._matrix);if(null==c)return null;c.invert();c.append(1,0,0,1,a,b);return new Point(c.tx,c.ty)};a.localToLocal=function(a,b,c){a=this.localToGlobal(a,b);return c.globalToLocal(a.x,a.y)};a.setTransform=function(a,b,c,d,e,f,j,h,l){this.x=a||0;this.y=b||0;this.scaleX=null==c?1:c;this.scaleY=null==d?1:d;this.rotation=e||0;this.skewX=f||0;this.skewY=j||0;this.regX=h||0;this.regY=l||0};a.getConcatenatedMatrix=function(a){a?a.identity():
a=new Matrix2D;for(var b=this;null!=b;)a.prependTransform(b.x,b.y,b.scaleX,b.scaleY,b.rotation,b.skewX,b.skewY,b.regX,b.regY),a.prependProperties(b.alpha,b.shadow,b.compositeOperation),b=b.parent;return a};a.clone=function(){var a=new b;this.cloneProps(a);return a};a.toString=function(){return"[DisplayObject (name="+this.name+")]"};a.cloneProps=function(a){a.alpha=this.alpha;a.name=this.name;a.regX=this.regX;a.regY=this.regY;a.rotation=this.rotation;a.scaleX=this.scaleX;a.scaleY=this.scaleY;a.shadow=
this.shadow;a.skewX=this.skewX;a.skewY=this.skewY;a.visible=this.visible;a.x=this.x;a.y=this.y;a.mouseEnabled=this.mouseEnabled;a.compositeOperation=this.compositeOperation};a.applyShadow=function(){};a._flX=0;a._flY=0;a._flScaleX=1;a._flScaleY=1;a._flRotation=0;a._flSkewX=0;a._flSkewY=0;a._flRegX=0;a._flRegY=0;a._flVisible=!0;a._flAlpha=1;a._flMouseEnabled=!0;a._flMouseOver=null;a._flMouseOut=null;a._flClick=a._flPress=null;a._flMask=null;a._flShadow=null;a._flUseHandCursor=!1;a._flButtonMode=!1;
a._flChange=null;a._flCache=!1;a._flCached=!1;a._flFiltersDirty=!1;a._flSyncProps=function(a){this.visible!==this._flVisible&&(this._flVisible=this.visible,this._flChange.push([this.id,"vs",this.visible]));if(this.visible){this.mouseEnabled!==this._flMouseEnabled&&(this._flMouseEnabled=this.mouseEnabled,this._flChange.push([this.id,"smen",this.mouseEnabled]));if(this.mouseEnabled&&(this.onMouseOver!==this._flMouseOver&&(this.onMouseOver&&!this._flMouseOver?this._flChange.push([this.id,"amov"]):!this.onMouseOver&&
this._flMouseOver&&this._flChange.push([this.id,"rmov"]),this._flMouseOver=this.onMouseOver),this.onMouseOut!==this._flMouseOut&&(this.onMouseOut&&!this._flMouseOut?this._flChange.push([this.id,"amot"]):!this.onMouseOut&&this._flMouseOut&&this._flChange.push([this.id,"rmot"]),this._flMouseOut=this.onMouseOut),this.onClick!==this._flClick&&(this.onClick&&!this._flClick?this._flChange.push([this.id,"amck"]):!this.onClick&&this._flClick&&this._flChange.push([this.id,"rmck"]),this._flClick=this.onClick),
this.onPress!==this._flOnPress))this.onPress&&!this._flOnPress?this._flChange.push([this.id,"aprs"]):!this.onPress&&this._flOnPress&&this._flChange.push([this.id,"rprs"]),this._flOnPress=this.onPress;this.alpha!==this._flAlpha&&(this._flAlpha=this.alpha,this._flChange.push([this.id,"op",this.alpha]));this.shadow&&this.shadow._flSyncProps(a);this.shadow!==this._flShadow&&(this._flShadow=this.shadow,this._flChange.push([this.id,"shd",this.shadow.id]));if(this._flFiltersDirty&&(this._flFiltersDirty=
!1,this.filters&&0<this.filters.length)){for(var i=[],c=0,d=this.filters.length;c<d;c++){var e=this.filters[c];e._flSyncProps(a);i[c]=e.id}this._flChange.push([this.id,"flts",i])}this.mask!==this._flMask&&(this._flMask=this.mask,this._flChange.push([this.id,"msk",this.mask?this.mask.id:null]));if(this.x!==this._flX||this.y!==this._flY||this.scaleX!==this._flScaleX||this.scaleY!==this._flScaleY||this.rotation!==this._flRotation||this.skewX!==this._flSkewX||this.skewY!==this._flSkewY||this.regX!==this._flRegX||
this.regY!==this._flRegY)this._flX=this.x,this._flY=this.y,this._flScaleX=this.scaleX,this._flScaleY=this.scaleY,this._flRotation=this.rotation,this._flSkewX=this.skewX,this._flSkewY=this.skewY,this._flRegX=this.regX,this._flRegY=this.regY,a=b._flTempMtx,a.identity(),a.prependTransform(this.x,this.y,this.scaleX,this.scaleY,this.rotation,this.skewX,this.skewY,this.regX,this.regY),this._flChange.push([this.id,"mtx",[a.a,a.b,a.c,a.d,a.tx,a.ty]])}};a.flSetCursorMode=function(a,b){a!==this._flUseHandCursor&&
(this._flChange.push([this.id,"scrs",a]),this._flUseHandCursor=a);b!==this._flButtonMode&&(this._flChange.push([this.id,"sbtn",b]),this._flButtonMode=b)};a._tick=function(a){if(this.onTick)this.onTick(a)};a._applyFilters=function(){};a.initialize=function(){this.id=UID.get();this._matrix=new Matrix2D;this._flChange=[]};a.draw=function(a){this._flSyncProps(a);if(this._flChange.length){for(var b=0,c=this._flChange.length;b<c;++b)a._flChange.push(this._flChange[b]);this._flChange=[]}};a._flRunCreate=
function(){throw"prototype._flRunCreate must be overriden for all DisplayObject subclasses";};a.cache=function(){this._flCache=!0;this._flCached=!1;this._flFiltersDirty=!0};a.updateCache=function(){this._flCache=!0;this._flCached=!1;this._flFiltersDirty=!0};a.uncache=function(){this._flCache=this._flCached=!1};a.hitTest=function(a,b){return this._flCtx?this._flCtx.flInvoke(this.id,"htp",[a,b]):!1};b._flTempMtx=new Matrix2D;h.DisplayObject=b})(window);(function(h){var b=function(){this.initialize()},a=b.prototype=new DisplayObject;a.children=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(){this.DisplayObject_initialize();this.children=[]};a.isVisible=function(){return this.visible&&0<this.alpha&&this.children.length&&0!=this.scaleX&&0!=this.scaleY};a.DisplayObject_draw=a.draw;a.removeChild=function(a){var b=arguments.length;if(1<b){for(var c=!0,d=0;d<b;d++)c=c&&this.removeChild(arguments[d]);return c}return this.removeChildAt(this.children.indexOf(a))};
a.getChildAt=function(a){return this.children[a]};a.sortChildren=function(a){this.children.sort(a);if(Stage.FL_THROW_UNIMPLEMENTED)throw"EaselFl:Container.sortChildren not yet implemented";};a.getChildIndex=function(a){return this.children.indexOf(a)};a.getNumChildren=function(){return this.children.length};a.swapChildrenAt=function(a,b){var c=this.children,d=c[a],e=c[b];d&&e&&(c[a]=e,c[b]=d)};a.swapChildren=function(a,b){for(var c=this.children,d,e,f=0,j=c.length;f<j&&!(c[f]==a&&(d=f),c[f]==b&&(e=
f),null!=d&&null!=e);f++);f!=j&&(c[d]=b,c[e]=a)};a.setChildIndex=function(a,b){if(Stage.FL_THROW_UNIMPLEMENTED)throw"EaselFl:Container.setChildIndex not yet implemented";for(var c=this.children,d=0,e=c.length;d<e&&c[d]!=a;d++);d==e||(0>b||b>e||d==b)||(c.splice(b,1),b<d&&d--,c.splice(a,d,0))};a.contains=function(a){for(;a;){if(a==this)return!0;a=a.parent}return!1};a.getObjectsUnderPoint=function(a,b){var c=[],d=this.localToGlobal(a,b);this._getObjectsUnderPoint(d.x,d.y,c);return c};a.getObjectUnderPoint=
function(a,b){var c=this.localToGlobal(a,b);return this._getObjectsUnderPoint(c.x,c.y)};a.clone=function(a){var i=new b;this.cloneProps(i);if(a)for(var c=i.children=[],d=0,e=this.children.length;d<e;d++){var f=this.children[d].clone(a);f.parent=i;c.push(f)}return i};a.toString=function(){return"[Container (name="+this.name+")]"};a._tick=function(a){for(var b=this.children.length-1;0<=b;b--){var c=this.children[b];c._tick&&c._tick(a)}if(this.onTick)this.onTick(a)};a._getObjectsUnderPoint=function(a,
i,c,d){var e=DisplayObject._hitTestContext,f=DisplayObject._hitTestCanvas,j=this._matrix,h=d&1&&(this.onPress||this.onClick||this.onDoubleClick)||d&2&&(this.onMouseOver||this.onMouseOut);if(this.cacheCanvas)if(this.getConcatenatedMatrix(j),e.setTransform(j.a,j.b,j.c,j.d,j.tx-a,j.ty-i),e.globalAlpha=j.alpha,this.draw(e),this._testHit(e)){if(f.width=0,f.width=1,h)return this}else return null;for(var l=this.children.length-1;0<=l;l--){var k=this.children[l];if(k.isVisible()&&k.mouseEnabled)if(k instanceof
b)if(h){if(k=k._getObjectsUnderPoint(a,i))return this}else{if(k=k._getObjectsUnderPoint(a,i,c,d),!c&&k)return k}else if(!d||h||d&1&&(k.onPress||k.onClick||k.onDoubleClick)||d&2&&(k.onMouseOver||k.onMouseOut))if(k.getConcatenatedMatrix(j),e.setTransform(j.a,j.b,j.c,j.d,j.tx-a,j.ty-i),e.globalAlpha=j.alpha,k.draw(e),this._testHit(e)){f.width=0;f.width=1;if(h)return this;if(c)c.push(k);else return k}}return null};a._flCtx=null;a.addChildAt=function(a,b){var c=arguments.length;if(2<c){for(var b=arguments[d-
1],d=0;d<c-1;d++)this.addChildAt(arguments[d],b+d);return arguments[c-2]}a.parent&&a.parent.removeChild(a);a.parent=this;this.children.splice(b,0,a);this._flCtx&&a._flRunCreate(this._flCtx);this._flChange.push([this.id,"aca",[a.id,b]]);return a};a.draw=function(a,b,c){if(this.DisplayObject_draw(a,b))return!0;c=c||this._matrix.reinitialize(1,0,0,1,0,0,this.alpha,this.shadow,this.compositeOperation);if(this._flCached||!this.isVisible())return!0;this._flCached=this._flCache;for(var b=this.children.length,
d=this.children.slice(0),e=0;e<b;e++){var f=d[e],h=f._matrix.reinitialize(c.a,c.b,c.c,c.d,c.tx,c.ty,c.alpha,c.shadow,c.compositeOperation);h.appendTransform(f.x,f.y,f.scaleX,f.scaleY,f.rotation,f.skewX,f.skewY,f.regX,f.regY);h.appendProperties(f.alpha,f.shadow,f.compositeOperation);f.draw(a,!1,h)}return!0};a.addChild=function(a){if(null==a)return a;var b=arguments.length;if(1<b){for(var c=0;c<b;c++)this.addChild(arguments[c]);return arguments[b-1]}a.parent&&a.parent.removeChild(a);a.parent=this;this.children.push(a);
this._flCtx&&a._flRunCreate(this._flCtx);this._flChange.push([this.id,"ac",a.id]);return a};a.removeChildAt=function(a){var b=arguments.length;if(1<b){for(var c=[],d=0;d<b;d++)c[d]=arguments[d];c.sort(function(a,b){return b-a});for(var e=!0,d=0;d<b;d++)e=e&&this.removeChildAt(c[d]);return e}if(0>a||a>this.children.length-1)return!1;b=this.children[a];null!=b&&(b.parent=null);this.children.splice(a,1);this._flChange.push([this.id,"rca",a]);return!0};a.removeAllChildren=function(){for(var a=this.children;a.length;)a.pop().parent=
null;this._flChange.push([this.id,"rac"])};a._flRunCreate=function(a){if(this._flCtx!==a){this._flCtx=a;a._flCreate.push(["cnt",this]);for(var b=0,c=this.children.length;b<c;++b)this.children[b]._flRunCreate(a)}};h.Container=b})(window);(function(h){var b=function(a){this.initialize(a)};b.isEaselFl=!0;var a=b.prototype=new Container;a._flCtx=null;a._flAutoClear=!0;a.flOnReady=null;a.flReady=!1;b._snapToPixelEnabled=!1;a.autoClear=!0;a.canvas=null;a.mouseX=null;a.mouseY=null;a.onMouseMove=null;a.onMouseUp=null;a.onMouseDown=null;a.snapToPixelEnabled=!1;a.mouseInBounds=!1;a.tickOnUpdate=!0;a._activeMouseEvent=null;a._activeMouseTarget=null;a._mouseOverIntervalID=null;a._mouseOverX=0;a._mouseOverY=0;a._mouseOverTarget=null;a.Container_initialize=
a.initialize;a.initialize=function(a){this.canvas=!0==a.isFl?a:new CanvasFl(a);this.canvas._stage=this;this.Container_initialize();this._enableMouseEvents(!0);this._flCtx=a=this.canvas.getContext("2d");a._flCreate.push(["stg",this])};a.update=function(a){this.canvas&&(this.canvas._ctx&&this.canvas._ctx.flReady)&&(!1===this.autoClear?(this._flAutoClear=this.autoClear,this.canvas._ctx._flChange.push([this.id,"blt"])):!1===this._flAutoClear&&(this._flAutoClear=!0,this.canvas._ctx._flChange.push([this.id,
"clr"])),b._snapToPixelEnabled=this.snapToPixelEnabled,this.tickOnUpdate&&this._tick(a),this.draw(this.canvas._ctx,!1,this.getConcatenatedMatrix(this._matrix)),this.canvas._ctx._flFlush())};a.tick=a.update;a.clear=function(){if(b.FL_THROW_UNIMPLEMENTED)throw"EaseFl:Stage.clear not yet implemented";};a.toDataURL=function(){if(b.FL_THROW_UNIMPLEMENTED)throw"Stage.toDataURL not implemented in EaselFl";};a.enableMouseOver=function(){};a.clone=function(){var a=new b(null);this.cloneProps(a);return a};
a.toString=function(){return"[Stage (name="+this.name+")]"};a._enableMouseEvents=function(){var a=this,i=b.__MS_BINDING?"attachEvent":"addEventListener";(document[i]?document:h)[i](b.__MS_BINDING?"onmousemove":"mousemove",function(b){a._handleMouseMove(b)},!1)};a._handleMouseMove=function(a){if(this.canvas){a||(a=h.event);var i=this.mouseInBounds;b.__MS_BINDING?this._updateMousePosition(a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a.clientY+document.body.scrollTop+document.documentElement.scrollTop):
this._updateMousePosition(a.pageX,a.pageY);if(i||this.mouseInBounds){a=new MouseEvent("onMouseMove",this.mouseX,this.mouseY,this,a);if(this.onMouseMove)this.onMouseMove(a);if(this._activeMouseEvent&&this._activeMouseEvent.onMouseMove)this._activeMouseEvent.onMouseMove(a)}}else this.mouseX=this.mouseY=null};a._updateMousePosition=function(a,b){var c=this.canvas._ctx._flInstance;if(c){do a-=c.offsetLeft,b-=c.offsetTop;while(c=c.offsetParent);if(this.mouseInBounds=0<=a&&0<=b&&a<this.canvas.width&&b<
this.canvas.height)this.mouseX=a,this.mouseY=b}};a._handleMouseUp=function(){};a._handleMouseDown=function(){};a._testMouseOver=function(){};a._handleDoubleClick=function(){};b.__MS_BINDING=h.addEventListener||document.addEventListener?!1:!0;b.FL_THROW_UNIMPLEMENTED=!0;b.FL_LOG_PART_IMPLEMENTED=!0;h.Stage=b})(window);(function(h){var b=function(a){this.initialize(a)},a=b.prototype=new DisplayObject;a.image=null;a.snapToPixel=!0;a.sourceRect=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(a){this.DisplayObject_initialize();"string"==typeof a?(this.image=new Image,this.image.src=a):this.image=a};a.isVisible=function(){return this.visible&&0<this.alpha&&0!=this.scaleX&&0!=this.scaleY&&this.image&&(this.image.complete||this.image.getContext||2<=this.image.readyState)};a.DisplayObject_draw=a.draw;
a.clone=function(){var a=new b(this.image);this.cloneProps(a);return a};a.toString=function(){return"[Bitmap (name="+this.name+")]"};a._flCtx=null;a._flImg=null;a._flSourceRect=null;a._flSmoothing=!1;a.flSmoothing=!1;a.flSetSmoothing=function(a){this._flCtx&&a!==this._flSmoothing?(this.flSmoothing=this._flSmoothing=a,this._flCtx._flChange.push([this.id,"smth",a])):this.flSmoothing=a};a._flRunCreate=function(a){this._flCtx!==a&&(this._flCtx=a,a._flCreate.push(["bmp",this]),this.flSetSmoothing(this.flSmoothing))};
a.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;this.image&&(this.image!==this._flImg&&(this._flImg=this.image,ImageFl.watch(this.image),this.sourceRect&&this.sourceRect._flSync(a),this.sourceRect!==this._flSourceRect&&(this._flSourceRect=this.sourceRect,a._flChange.push([this.id,"rct",this.sourceRect?this.sourceRect.id:null])),a._flChange.push([this.id,"img",this.image.__fl.id])),this.image.__fl.sync(a));return!0};h.Bitmap=b})(window);(function(h){var b=function(a){this.initialize(a)},a=b.prototype=new DisplayObject;a._flCtx=null;a._flRunCreate=function(a){this._flCtx!==a&&(this._flCtx=a,a._flCreate.push(["shp",this]),a._flCreate.push(["gfx",this.graphics]),a._flChange.push([this.id,"gfx",[this.graphics.id]]))};a.graphics=null;a.DisplayObject_initialize=a.initialize;a.initialize=function(a){this.DisplayObject_initialize();this.graphics=a?a:new Graphics};a.isVisible=function(){return this.visible&&0<this.alpha&&0!=this.scaleX&&
0!=this.scaleY&&this.graphics};a.DisplayObject_draw=a.draw;a.draw=function(a,b){if(this.DisplayObject_draw(a,b))return!0;this._flCached||(this._flCached=this._flCache,this.graphics.draw(a));return!0};a.clone=function(){if(CanvasFl.THROW_UNIMPLEMENTED)throw"EaselFl:Shape.clone currently not implemented";return o};a.toString=function(){return"[Shape (name="+this.name+")]"};h.Shape=b})(window);
